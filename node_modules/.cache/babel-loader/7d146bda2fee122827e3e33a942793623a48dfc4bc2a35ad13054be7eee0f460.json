{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport layout from '@/layout/layout.vue';\nimport Login from '@/views/login/index.vue';\nVue.use(VueRouter);\nconst routes = [{\n  path: '/login',\n  name: 'Login',\n  component: Login\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\n\n// 提供一个重置路由的方法\nexport const resetRouter = () => {\n  router.matcher = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n  });\n};\n//刷新页面会重置路由\nexport const setRoutes = () => {\n  const storeMenus = localStorage.getItem(\"menus\");\n  if (storeMenus) {\n    //拼装动态路由\n    const manageRoute = {\n      path: '/',\n      name: 'Manage',\n      component: () => import('../views/Manage.vue'),\n      redirect: '/login',\n      children: []\n    };\n    const menus = JSON.parse(storeMenus);\n    menus.forEach(item => {\n      if (item.path) {\n        //当且仅当path不为空的时候才去设置路由\n        let itemMenu = {\n          path: item.path.replace(\"/\", \"\"),\n          name: item.name,\n          component: () => import('../views/' + item.pagePath + '.vue')\n        };\n        manageRoute.children.push(itemMenu);\n      } else if (item.children.length) {\n        item.children.forEach(item => {\n          if (item.path) {\n            let itemMenu = {\n              path: item.path.replace(\"/\", \"\"),\n              name: item.name,\n              component: () => import('../views/' + item.pagePath + '.vue')\n            };\n            manageRoute.children.push(itemMenu);\n          }\n        });\n      }\n    });\n    //获取当前的路由对象名称数组\n    const currentRouteNames = router.getRoutes().map(v => v.name);\n    if (!currentRouteNames.includes('Manage')) {\n      //动态加载到想在的路由对象\n      router.addRoute(manageRoute);\n    }\n  }\n};\nsetRoutes();\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","layout","Login","use","routes","path","name","component","router","mode","base","process","env","BASE_URL","resetRouter","matcher","setRoutes","storeMenus","localStorage","getItem","manageRoute","redirect","children","menus","JSON","parse","forEach","item","itemMenu","replace","pagePath","push","length","currentRouteNames","getRoutes","map","v","includes","addRoute"],"sources":["D:/workspace/GraduationDesign/electric-pile-admin/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport layout from '@/layout/layout.vue'\nimport Login from '@/views/login/index.vue'\n\nVue.use(VueRouter)\n\nconst routes = [ \n  {\n    path: '/login',\n    name: 'Login',\n    component: Login\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n// 提供一个重置路由的方法\nexport const resetRouter=()=>{\n  router.matcher=new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n  })\n}\n//刷新页面会重置路由\nexport const setRoutes=()=>{\n  const storeMenus=localStorage.getItem(\"menus\");\n  if(storeMenus){\n    //拼装动态路由\n    const manageRoute={ path: '/', name:'Manage', component: () => import('../views/Manage.vue'),redirect: '/login', children: []}\n    const menus=JSON.parse(storeMenus)\n    menus.forEach(item=>{\n      if(item.path){//当且仅当path不为空的时候才去设置路由\n        let itemMenu={ path: item.path.replace(\"/\",\"\"),name: item.name,component: () => import('../views/'+item.pagePath+'.vue')}\n        manageRoute.children.push(itemMenu)\n      }else if(item.children.length){\n        item.children.forEach(item=>{\n          if(item.path){\n            let itemMenu={ path: item.path.replace(\"/\",\"\"),name: item.name,component: () => import('../views/'+item.pagePath+'.vue')}\n            manageRoute.children.push(itemMenu)\n          }\n        })\n      }\n    })  \n    //获取当前的路由对象名称数组\n    const currentRouteNames=router.getRoutes().map(v=>v.name)\n    if(!currentRouteNames.includes('Manage')){\n      //动态加载到想在的路由对象\n    router.addRoute(manageRoute)\n    }    \n  }\n}\nsetRoutes()\nexport default router\n"],"mappings":";AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,KAAK,MAAM,yBAAyB;AAE3CH,GAAG,CAACI,GAAG,CAACH,SAAS,CAAC;AAElB,MAAMI,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEL;AACb,CAAC,CACF;AAED,MAAMM,MAAM,GAAG,IAAIR,SAAS,CAAC;EAC3BS,IAAI,EAAE,SAAS;EACfC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ;EAC1BT;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMU,WAAW,GAACA,CAAA,KAAI;EAC3BN,MAAM,CAACO,OAAO,GAAC,IAAIf,SAAS,CAAC;IAC3BS,IAAI,EAAE,SAAS;IACfC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ;IAC1BT;EACF,CAAC,CAAC;AACJ,CAAC;AACD;AACA,OAAO,MAAMY,SAAS,GAACA,CAAA,KAAI;EACzB,MAAMC,UAAU,GAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC9C,IAAGF,UAAU,EAAC;IACZ;IACA,MAAMG,WAAW,GAAC;MAAEf,IAAI,EAAE,GAAG;MAAEC,IAAI,EAAC,QAAQ;MAAEC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,qBAAqB,CAAC;MAACc,QAAQ,EAAE,QAAQ;MAAEC,QAAQ,EAAE;IAAE,CAAC;IAC9H,MAAMC,KAAK,GAACC,IAAI,CAACC,KAAK,CAACR,UAAU,CAAC;IAClCM,KAAK,CAACG,OAAO,CAACC,IAAI,IAAE;MAClB,IAAGA,IAAI,CAACtB,IAAI,EAAC;QAAC;QACZ,IAAIuB,QAAQ,GAAC;UAAEvB,IAAI,EAAEsB,IAAI,CAACtB,IAAI,CAACwB,OAAO,CAAC,GAAG,EAAC,EAAE,CAAC;UAACvB,IAAI,EAAEqB,IAAI,CAACrB,IAAI;UAACC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,WAAW,GAACoB,IAAI,CAACG,QAAQ,GAAC,MAAM;QAAC,CAAC;QACzHV,WAAW,CAACE,QAAQ,CAACS,IAAI,CAACH,QAAQ,CAAC;MACrC,CAAC,MAAK,IAAGD,IAAI,CAACL,QAAQ,CAACU,MAAM,EAAC;QAC5BL,IAAI,CAACL,QAAQ,CAACI,OAAO,CAACC,IAAI,IAAE;UAC1B,IAAGA,IAAI,CAACtB,IAAI,EAAC;YACX,IAAIuB,QAAQ,GAAC;cAAEvB,IAAI,EAAEsB,IAAI,CAACtB,IAAI,CAACwB,OAAO,CAAC,GAAG,EAAC,EAAE,CAAC;cAACvB,IAAI,EAAEqB,IAAI,CAACrB,IAAI;cAACC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,WAAW,GAACoB,IAAI,CAACG,QAAQ,GAAC,MAAM;YAAC,CAAC;YACzHV,WAAW,CAACE,QAAQ,CAACS,IAAI,CAACH,QAAQ,CAAC;UACrC;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IACF;IACA,MAAMK,iBAAiB,GAACzB,MAAM,CAAC0B,SAAS,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,IAAEA,CAAC,CAAC9B,IAAI,CAAC;IACzD,IAAG,CAAC2B,iBAAiB,CAACI,QAAQ,CAAC,QAAQ,CAAC,EAAC;MACvC;MACF7B,MAAM,CAAC8B,QAAQ,CAAClB,WAAW,CAAC;IAC5B;EACF;AACF,CAAC;AACDJ,SAAS,CAAC,CAAC;AACX,eAAeR,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}