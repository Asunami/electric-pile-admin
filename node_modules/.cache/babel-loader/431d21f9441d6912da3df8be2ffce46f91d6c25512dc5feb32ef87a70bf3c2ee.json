{"ast":null,"code":"import { nameRule, passwordRule } from '@/utils/vaildate.js';\nimport { managerLogin } from '@/api/manager.js';\nimport { setRoutes } from '@/router/index.js';\nexport default {\n  name: 'ProjectSupportAdminLogin',\n  data() {\n    return {\n      manager: localStorage.getItem(\"manager\") ? JSON.parse(localStorage.getItem(\"manager\")) : {},\n      form: {\n        username: '',\n        password: ''\n      },\n      rules: {\n        username: [{\n          validator: nameRule,\n          trigger: 'blur'\n        }],\n        password: [{\n          validator: passwordRule,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  mounted() {},\n  created() {\n    this.form.username = this.manager.username;\n    this.form.password = this.manager.password;\n  },\n  methods: {\n    login(form) {\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          console.log(this.form);\n          managerLogin(this.form).then(res => {\n            if (res.data.code === 200) {\n              //存储用户信息到浏览器\n              localStorage.setItem('manager', JSON.stringify(res.data.data));\n              //存储当前用户权限菜单到浏览器\n              localStorage.setItem('menus', JSON.stringify(res.data.data.menus));\n              setRoutes();\n              this.$message({\n                message: res.data.message,\n                type: 'success'\n              });\n              this.$router.replace('/home/home');\n            }\n          }).catch(err => {\n            console.error(err);\n          });\n        } else {\n          console.log(this.form);\n        }\n      });\n    },\n    resetForm(form) {\n      this.$refs[form].resetFields();\n    }\n  }\n};","map":{"version":3,"names":["nameRule","passwordRule","managerLogin","setRoutes","name","data","manager","localStorage","getItem","JSON","parse","form","username","password","rules","validator","trigger","mounted","created","methods","login","$refs","validate","valid","console","log","then","res","code","setItem","stringify","menus","$message","message","type","$router","replace","catch","err","error","resetForm","resetFields"],"sources":["src/views/login/index.vue"],"sourcesContent":["<template>\r\n    <div class=\"box\">\r\n        <el-container class=\"container\">\r\n            <el-header class=\"head\">\r\n                <h1 style=\"font-size:260%;\">欢迎使用充电桩预约后台管理系统</h1>\r\n            </el-header>\r\n            <el-main class=\"main\">\r\n                <el-row :gutter=\"20\" class=\"el-row\">\r\n                    <el-col :span=\"16\">\r\n                        <img src=\"@/assets/img/img_login.png\" height=\"560px\">\r\n                    </el-col>\r\n                    <el-col :span=\"8\" class=\"el-col\">\r\n                        <div class=\"login\">\r\n                            <el-form ref=\"form\" label-width=\"100px\" :model=\"form\" :rules=\"rules\" align=\"center\">\r\n                                <el-form-item prop=\"username\">\r\n                                    <el-input v-model=\"form.username\" placeholder=\"输入用户名\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item prop=\"password\">\r\n                                    <el-input v-model=\"form.password\" show-password placeholder=\"输入密码\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item>\r\n                                    <el-button type=\"primary\" @click=\"login('form')\">登录</el-button>\r\n                                    <el-button type=\"danger\" @click=\"resetForm('form')\">取消</el-button>\r\n                                </el-form-item>\r\n                            </el-form>\r\n                        </div>\r\n                    </el-col>\r\n                </el-row>\r\n\r\n            </el-main>\r\n            <el-footer>\r\n                <div class=\"footer\">\r\n                    <div class=\"footer-font\">\r\n                        <a href=\"http://00.00.00.00/\" target=\"_blank\" class=\"no-decoration\">用户体验实验室</a>\r\n                        \"2022 | 版权所有 ©\"\r\n                        <a href=\"http://www.xxx.com/\" target=\"_blank\">贵州大学</a>\r\n                    </div>\r\n                </div>\r\n            </el-footer>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { nameRule, passwordRule } from '@/utils/vaildate.js'\r\n    import { managerLogin } from '@/api/manager.js';\r\n    import { setRoutes } from '@/router/index.js';\r\n    export default {\r\n        name: 'ProjectSupportAdminLogin',\r\n        data() {\r\n            return {\r\n                manager: localStorage.getItem(\"manager\") ? JSON.parse(localStorage.getItem(\"manager\")) : {},\r\n                form: {\r\n                    username: '',\r\n                    password: '',\r\n                },\r\n                rules: {\r\n                    username: [{ validator: nameRule, trigger: 'blur' }],\r\n                    password: [{ validator: passwordRule, trigger: 'blur' }]\r\n                },\r\n\r\n            };\r\n        },\r\n\r\n        mounted() {\r\n\r\n        },\r\n        created() {\r\n            this.form.username = this.manager.username;\r\n            this.form.password = this.manager.password;\r\n        },\r\n\r\n        methods: {\r\n            login(form) {\r\n                this.$refs[form].validate((valid) => {\r\n                    if (valid) {\r\n                        console.log(this.form);\r\n                        managerLogin(this.form).then(res => {\r\n                            if (res.data.code === 200) {\r\n                                //存储用户信息到浏览器\r\n                                localStorage.setItem('manager', JSON.stringify(res.data.data));\r\n                                //存储当前用户权限菜单到浏览器\r\n                                localStorage.setItem('menus', JSON.stringify(res.data.data.menus));\r\n                                setRoutes()\r\n                                this.$message({ message: res.data.message, type: 'success' });\r\n                                this.$router.replace('/home/home');\r\n                            }\r\n                        })\r\n                            .catch((err) => {\r\n                                console.error(err);\r\n                            });\r\n                    } else {\r\n                        console.log(this.form);\r\n                    }\r\n                });\r\n            },\r\n            resetForm(form) {\r\n                this.$refs[form].resetFields();\r\n            }\r\n\r\n        },\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n    .box {\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n    }\r\n\r\n    .container {\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    .login {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        width: 400px;\r\n    }\r\n\r\n    .main {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        height: calc(100% - 180px);\r\n        width: 100%;\r\n    }\r\n\r\n    .el-row {\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n\r\n    .el-col {\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .footer {\r\n        height: 40px;\r\n        display: flex;\r\n        justify-content: flex-end;\r\n        align-items: center;\r\n        border-radius: 2px;\r\n    }\r\n\r\n    .footer-font {\r\n        color: #76838f;\r\n        font-size: smaller;\r\n    }\r\n</style>"],"mappings":"AA4CA,SAAAA,QAAA,EAAAC,YAAA;AACA,SAAAC,YAAA;AACA,SAAAC,SAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA,EAAAC,YAAA,CAAAC,OAAA,cAAAC,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA;MACAG,IAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,QAAA;UAAAG,SAAA,EAAAf,QAAA;UAAAgB,OAAA;QAAA;QACAH,QAAA;UAAAE,SAAA,EAAAd,YAAA;UAAAe,OAAA;QAAA;MACA;IAEA;EACA;EAEAC,QAAA,GAEA;EACAC,QAAA;IACA,KAAAP,IAAA,CAAAC,QAAA,QAAAN,OAAA,CAAAM,QAAA;IACA,KAAAD,IAAA,CAAAE,QAAA,QAAAP,OAAA,CAAAO,QAAA;EACA;EAEAM,OAAA;IACAC,MAAAT,IAAA;MACA,KAAAU,KAAA,CAAAV,IAAA,EAAAW,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAC,OAAA,CAAAC,GAAA,MAAAd,IAAA;UACAT,YAAA,MAAAS,IAAA,EAAAe,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAtB,IAAA,CAAAuB,IAAA;cACA;cACArB,YAAA,CAAAsB,OAAA,YAAApB,IAAA,CAAAqB,SAAA,CAAAH,GAAA,CAAAtB,IAAA,CAAAA,IAAA;cACA;cACAE,YAAA,CAAAsB,OAAA,UAAApB,IAAA,CAAAqB,SAAA,CAAAH,GAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAA0B,KAAA;cACA5B,SAAA;cACA,KAAA6B,QAAA;gBAAAC,OAAA,EAAAN,GAAA,CAAAtB,IAAA,CAAA4B,OAAA;gBAAAC,IAAA;cAAA;cACA,KAAAC,OAAA,CAAAC,OAAA;YACA;UACA,GACAC,KAAA,CAAAC,GAAA;YACAd,OAAA,CAAAe,KAAA,CAAAD,GAAA;UACA;QACA;UACAd,OAAA,CAAAC,GAAA,MAAAd,IAAA;QACA;MACA;IACA;IACA6B,UAAA7B,IAAA;MACA,KAAAU,KAAA,CAAAV,IAAA,EAAA8B,WAAA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}